unlink("SAFE_SMBKC_cache", recursive = TRUE)
knitr::opts_chunk$set(echo=FALSE,message=FALSE,warning=FALSE)
library(plyr)
library(dplyr)
library(knitr)
library(ggplot2)
library(PBSmodelling)
library(pander)
library(coda)
library(maps)
library(lattice)
library(PBSmapping)
library(mapdata)    #some additional hires data
library(maptools)   #useful tools such as reading shapefiles
library(mapproj)
library(plotrix)
library(ggridges)
library(reshape2)
library(miceadds)
library(devtools)
#install.packages("szuwalski/gmr")
library(gmr)
in_path<-"C:/gmacs-develop/gmr/R/"
source.all( path=in_path, grepstring="\\.R",  print.source=TRUE, file_sep="__"  )
source(paste0(getwd(), "/Modif_functions.R"))
ABC_buffer  <-0.8
chosen_ind<-1
OFL_fleet_ind<-0
# Species of interest
Spc <- "SMBKC"
#===PULL gmacs DATA AND outputs
mod_names <- c(
"Version 2.01.E",
"Version 2.01.F",
"Version 2.01.G",
"Version 2.01.H",
"Version 2.01.I",
"Version 2.01.K"
)
ScenarioNames<-mod_names
# needs terminal backslash
.MODELDIR = c(
paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_E/src_rbar_NO_snow/build/",Spc,"/"),
paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_F/src_rbar_NO_snow/build/",Spc,"/"),
paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_G/src_rbar_NO_snow/build/",Spc,"/"),
paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_H/src_rbar_NO_snow/build/",Spc,"/"),
paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_I/src_rbar_NO_snow/build/",Spc,"/"),
paste0(getwd(), "/Latest_Version/build/",Spc,"/")
)
.THEME    = theme_bw(base_size = 12, base_family = "") +
theme(strip.text.x = element_text(margin= margin(1,0,1,0)),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank(),
strip.background = element_rect(color="white",fill="white"))
.OVERLAY  = TRUE
#==some of this repeats info in the .DAT file and should be read directly, rather than
#==repeated here (e.g. .FLEET and .SEAS)
.SEX      = c("Aggregate","Male","Female")
.FLEET    = c("Pot_Fishery","Trawl_Bycatch","Fixed_bycatch","NMFS_Trawl","ADFG_Pot")
.TYPE     = c("Retained","Discarded","Total")
.SHELL    = c("New","Old")
.MATURITY = c("Aggregate","Mature","Immature")
.SEAS     = c("1","2","3","4","5")
fn       <- paste0(.MODELDIR, "gmacs")
M        <- lapply(fn, read_admb) #need .prj file to run gmacs and need .rep file here
names(M) <- mod_names
#==loop through the size comp data, plot and save to be included later
#
mdf <- .get_sizeComps_df(M)
#
# for(x in 1:length(mdf)){
# png(paste(.MODELDIR[1],"plots/size_comp_",x,".png",sep=""),height=8,width=8,res=300,units='in')
# plot_size_comps(M,which=x)
# dev.off()
# }
#
# for(x in 1:length(mdf)){
#   png(paste(.MODELDIR[1],"plots/size_ridges_",x,".png",sep=""),height=8,width=8,res=300,units='in')
#   plot_size_ridges(M,which=x)
#   dev.off()
# }
paste(.MODELDIR[1],"plots/size_comp_1.png",sep="")
include_graphics(paste(.MODELDIR[1],"plots/size_comp_1.png",sep=""))
include_graphics
# include_graphics(paste(.MODELDIR[1],"plots/size_comp_1.png",sep=""))
getwd()
# include_graphics(paste(.MODELDIR[1],"plots/size_comp_1.png",sep=""))
dir_fig = paste0(dirname(getwd()), "/GMACS_Orig/GMACS_V_2_01_E/src_rbar_NO_snow/build/",Spc,"/plots/")
dir_fig
setwd(dir_fig)
getwd()
